'use client';
import{__rest}from"tslib";import{jsx}from"react/jsx-runtime";import{sidebarReducer}from"./sidebar.reducer.js";import{sidebarActionEnum}from"./Sidebar.types.js";import{SidebarFooter}from"./SidebarFooter/SidebarFooter.js";import{SidebarHead}from"./SidebarHead/SidebarHead.js";import{SidebarNav}from"./SidebarNav/SidebarNav.js";import{SidebarSeparator}from"./SidebarSeparator/SidebarSeparator.js";import{useComponentTheme}from"../../theme/theme.context.js";import{usePropId}from"../../utils/usePropId.js";import{forwardRef,useRef,useReducer,useEffect}from"react";import{twMerge}from"tailwind-merge";import{SidebarContextProvider}from"./Sidebar.context.js";const defaultProps={color:"slate",expanded:!0,shadow:"lg"},SidebarRoot=forwardRef(((e,r)=>{const o=useComponentTheme("Sidebar"),a=Object.assign(Object.assign({},defaultProps),e),{children:d,color:t,expanded:i=!0,className:s,onToggle:n,shadow:m}=a,b=__rest(a,["children","color","expanded","className","onToggle","shadow"]),c=useRef(!1),[p,l]=useReducer(sidebarReducer,{hovered:!1,expanded:i,mobile:!1}),u=twMerge(o.base({className:s,color:t,shadow:m,expanded:p.expanded,hovered:p.hovered,mobile:p.mobile})),S=usePropId(e.id),f={color:t,dispatch:l,state:p};useEffect((()=>{c.current?"function"==typeof n&&n(p):c.current=!0}),[p,n]);const h=e=>{l({type:sidebarActionEnum.mobile})};return useEffect((()=>(document.addEventListener("sidebar:toggle-mobile",h),()=>{document.removeEventListener("sidebar:toggle-mobile",h)}))),jsx("aside",Object.assign({id:S,ref:r,className:u,onMouseEnter:e=>{"sidebar-head-toggle"!==e.target.dataset.role&&(p.expanded||l({type:sidebarActionEnum.hover,payload:{hovered:!0}}))},onMouseLeave:()=>{p.expanded||l({type:sidebarActionEnum.hover,payload:{hovered:!1}})}},b,{children:jsx(SidebarContextProvider,Object.assign({value:f},{children:d}))}))}));SidebarRoot.displayName="Sidebar";const Sidebar=Object.assign(SidebarRoot,{Head:SidebarHead,Nav:SidebarNav,Separator:SidebarSeparator,Footer:SidebarFooter});export{Sidebar as default};
