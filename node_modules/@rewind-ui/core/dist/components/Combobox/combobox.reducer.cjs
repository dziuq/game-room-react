"use strict";var Combobox_types=require("./Combobox.types.cjs");const comboboxReducer=(e,o)=>{switch(o.type){case Combobox_types.ComboboxActionEnum.register:return Object.assign(Object.assign({},e),{options:[...e.options,{label:o.payload.label,value:o.payload.value}]});case Combobox_types.ComboboxActionEnum.single_select:if(!o.payload.omitOnChange&&e.onChange&&e.onChange(o.payload.value),void 0===o.payload.value)return e;const s=e.selectedOptions.find((e=>e.value===o.payload.value)),a=e.options.find((e=>e.value===o.payload.value));return Object.assign(Object.assign({},e),{search:"",searching:!1,selectedOptions:s&&o.payload.toggle?[]:[a]});case Combobox_types.ComboboxActionEnum.multi_select:const t=e.selectedOptions.find((e=>e.value===o.payload.value));let n=e.selectedOptions.filter((e=>e.value!==(null==t?void 0:t.value)));if(t&&o.payload.toggle)return!o.payload.omitOnChange&&e.onChange&&e.onChange(n.map((e=>e.value))),Object.assign(Object.assign({},e),{search:"",searching:!1,selectedOptions:n});if(t&&!o.payload.toggle)return e;const c=e.options.find((e=>e.value===o.payload.value));return n=[...e.selectedOptions,c],!o.payload.omitOnChange&&e.onChange&&e.onChange(n.map((e=>e.value))),Object.assign(Object.assign({},e),{search:"",searching:!1,selectedOptions:n});case Combobox_types.ComboboxActionEnum.init_multi_select:const i=e.selectedOptions.map((e=>e.value)).sort(),l=o.payload.values.sort(),b=i.length===l.length;if(l.every(((e,o)=>i[o]===e))&&b)return e;const r=e.options.filter((e=>o.payload.values.includes(e.value)));return Object.assign(Object.assign({},e),{selectedOptions:r});case Combobox_types.ComboboxActionEnum.remove_last:if(e.onChange){const o=e.selectedOptions.slice(0,-1).map((e=>e.value));e.onChange(e.multiple?o:o[0])}return Object.assign(Object.assign({},e),{search:"",searching:!1,selectedOptions:e.selectedOptions.slice(0,-1)});case Combobox_types.ComboboxActionEnum.reset:return e.onChange&&e.onChange(null),Object.assign(Object.assign({},e),{search:"",searching:!1,selectedOptions:[]});case Combobox_types.ComboboxActionEnum.search_start:return Object.assign(Object.assign({},e),{search:o.payload.search,searching:!0});case Combobox_types.ComboboxActionEnum.search_reset:return Object.assign(Object.assign({},e),{search:"",searching:!1});default:return e}};exports.comboboxReducer=comboboxReducer;
