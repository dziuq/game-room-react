'use client';
import{__rest}from"tslib";import{jsx}from"react/jsx-runtime";import Toast from"../Toast.js";import{toastReducer,toastActionEnum}from"./toast.reducer.js";import{FloatingPortal}from"@floating-ui/react";import{useComponentTheme}from"../../../theme/theme.context.js";import{usePropId}from"../../../utils/usePropId.js";import{forwardRef,useReducer,useEffect,useMemo}from"react";import{twMerge}from"tailwind-merge";import{AnimatePresence}from"../../../node_modules/framer-motion/dist/es/components/AnimatePresence/index.js";import{motion}from"../../../node_modules/framer-motion/dist/es/render/dom/motion.js";const defaultProps={max:5,position:"top-right"},ToastContainer=forwardRef(((t,e)=>{const o=useComponentTheme("Toast"),[s,a]=useReducer(toastReducer,[]),i=Object.assign(Object.assign({},defaultProps),t),{className:n="",max:r,position:m}=i,d=__rest(i,["className","max","position"]),c=usePropId(t.id),p=t=>{a({type:toastActionEnum.add,payload:t.detail,max:r})},u=t=>{a({type:toastActionEnum.update,payload:t.detail})},l=t=>{a({type:toastActionEnum.remove,payload:t.detail})},f=()=>{a({type:toastActionEnum.clear,payload:{}})};useEffect((()=>(document.addEventListener("toasts:add",p),document.addEventListener("toasts:update",u),document.addEventListener("toasts:remove",l),document.addEventListener("toasts:clear",f),()=>{document.removeEventListener("toasts:add",p),document.removeEventListener("toasts:update",u),document.removeEventListener("toasts:remove",l),document.removeEventListener("toasts:clear",f)})));const j=useMemo((()=>twMerge(o.container({className:n,position:m}))),[n,m,o]);return jsx(FloatingPortal,{children:jsx("div",Object.assign({ref:e,id:c,className:j},d,{children:jsx(AnimatePresence,Object.assign({initial:!1},{children:s.map((t=>jsx(motion.div,Object.assign({layout:!0,initial:{opacity:0,x:"top-right"===m||"bottom-right"===m?"100%":"-100%",scale:.85},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:"top-right"===m||"bottom-right"===m?"100%":"-100%",scale:.85,transition:{duration:.2}}},{children:jsx(Toast,Object.assign({},t))}),t.id)))}))}))})}));ToastContainer.displayName="ToastContainer";export{ToastContainer as default};
