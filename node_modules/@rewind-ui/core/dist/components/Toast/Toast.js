'use client';
import{__rest}from"tslib";import{jsx,jsxs}from"react/jsx-runtime";import{useToast}from"./use-toast.hook.js";import{ErrorIcon}from"../../icons/Error.js";import{InfoIcon}from"../../icons/Info.js";import{QuestionIcon}from"../../icons/Question.js";import{SuccessIcon}from"../../icons/Success.js";import{WarningIcon}from"../../icons/Warning.js";import{useComponentTheme}from"../../theme/theme.context.js";import{useComponentVariant}from"../../theme/variant.context.js";import{usePropId}from"../../utils/usePropId.js";import{forwardRef,useState,useRef,useMemo,useEffect}from"react";import{twMerge}from"tailwind-merge";const defaultProps={closeOnClick:!0,color:"blue",pauseOnHover:!0,radius:"lg",shadow:"base",shadowColor:"gray",showProgress:!0,tone:"solid"},icons={error:jsx(ErrorIcon,{}),info:jsx(InfoIcon,{}),question:jsx(QuestionIcon,{}),success:jsx(SuccessIcon,{}),warning:jsx(WarningIcon,{})},Toast=forwardRef(((e,s)=>{const o=useComponentVariant("Toast",e.variant),r=useComponentTheme("Toast"),t=Object.assign(Object.assign(Object.assign({},defaultProps),o),e),{actions:n=[],className:a="",closeOnClick:i,color:c,description:l="",duration:m=3e3,halted:u=!1,iconType:d,pauseOnHover:p,radius:j,shadow:f,shadowColor:h,showProgress:g,title:x="",tone:v,variant:w}=t,O=__rest(t,["actions","className","closeOnClick","color","description","duration","halted","iconType","pauseOnHover","radius","shadow","shadowColor","showProgress","title","tone","variant"]),[I,b]=useState(u),[C,N]=useState(u?1e3:0),T=useToast(),k=usePropId(e.id),P=useRef(null),y=useRef(null),E=!!x,M=useMemo((()=>twMerge(r.toast({className:a,color:c,tone:v,radius:j,shadow:f,shadowColor:h}))),[a,c,v,j,f,h,r]),S=e=>{y.current||(y.current=e);e-(y.current||0)>=50&&(N((e=>e+50)),y.current=e),P.current=requestAnimationFrame(S)};return useEffect((()=>{if(I||(P.current=requestAnimationFrame(S)),p)return()=>{P.current&&cancelAnimationFrame(P.current),y.current&&cancelAnimationFrame(y.current)}}),[I]),useEffect((()=>{m&&C>=m&&T.remove(k)}),[C]),jsxs("div",Object.assign({id:k,ref:s,role:"alert","aria-live":"assertive",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),className:M},O,{children:[m>0&&g&&jsx("div",Object.assign({className:r.progress({color:c,tone:v})},{children:jsx("div",{className:r.progressInner({color:c,tone:v}),style:{width:100*C/m+"%",transitionDuration:"50ms"}})})),jsxs("div",Object.assign({className:r.contentWrapper({closeOnClick:i}),onClick:()=>{i&&T.remove(k)}},{children:[d&&icons[d],jsxs("div",Object.assign({className:r.content()},{children:[x&&jsx("h4",Object.assign({className:r.title()},{children:x})),l&&jsx("p",Object.assign({className:r.description({hasTitle:E})},{children:l}))]}))]})),n.length>0&&jsx("div",Object.assign({className:r.actionsWrapper({tone:v,color:c})},{children:n.map(((e,s)=>jsx("button",Object.assign({className:r.action({primary:e.primary,tone:v,color:c}),onClick:e.onClick},{children:e.label}),`action-${k}-${s}`)))}))]}))}));Toast.displayName="Toast";export{Toast as default};
