import{__rest}from"tslib";import{jsx,jsxs}from"react/jsx-runtime";import{useDropdownContext}from"../Dropdown.context.js";import{DropdownItem}from"../DropdownItem/DropdownItem.js";import{useMergeRefs,FloatingPortal}from"@floating-ui/react";import{arrowSideDictionary}from"../../../helpers/arrow-side.dictionary.js";import{useVerticalArrows}from"../../../hooks/use-vertical-arrows.hook.js";import{useComponentTheme}from"../../../theme/theme.context.js";import{usePropId}from"../../../utils/usePropId.js";import{forwardRef,useRef,useMemo,Children,cloneElement}from"react";import{twMerge}from"tailwind-merge";const DropdownContent=forwardRef(((e,o)=>{var r,t;const s=useComponentTheme("Dropdown"),i=Object.assign({},e),{children:a,className:n=""}=i,l=__rest(i,["children","className"]),d=usePropId(e.id),m=[],p=useRef(),{x:c,y:w,context:f,open:u,floating:g,strategy:j,color:x,size:h,mode:D,radius:b,shadow:y,withinPortal:C,arrowRef:O,getFloatingProps:v}=useDropdownContext(),N=useMergeRefs([g,p]),I=(null===(r=f.middlewareData.arrow)||void 0===r?void 0:r.x)||0,P=(null===(t=f.middlewareData.arrow)||void 0===t?void 0:t.y)||0,R=arrowSideDictionary({side:f.placement}),M=useMemo((()=>twMerge(s.base({arrowSide:R,className:n,color:x,mode:D,open:u,radius:b,shadow:y,size:h}))),[R,n,x,D,u,b,y,h,s]),S=jsx("span",{ref:O,className:s.arrow({arrowSide:R,color:x}),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"right"!==R&&{left:`${I}px`}),"top"!==R&&"left"!==R&&{bottom:`${P}px`}),"left"===R&&{top:`${P}px`}),"right"===R&&{top:`${P}px`}),{[R]:"-5px"})}),$=Children.map(a,((e,o)=>e.type.displayName!==DropdownItem.displayName?e:cloneElement(e,Object.assign(Object.assign({},e.props),{tabIndex:o+1,ref:e=>{(null==e?void 0:e.disabled)||m.push(e)}})))),_=jsxs("div",Object.assign({id:d,ref:N,className:M,role:"menu",style:{position:j,top:null!=w?w:0,left:null!=c?c:0}},v,l,{children:[S,$]}));return useVerticalArrows(m,u),jsx("div",Object.assign({ref:o,className:n},{children:C?jsx(FloatingPortal,{children:_}):_}))}));DropdownContent.displayName="DropdownContent";export{DropdownContent};
