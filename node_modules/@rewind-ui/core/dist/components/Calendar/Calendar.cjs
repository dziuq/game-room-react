'use client';
"use strict";var tslib=require("tslib"),jsxRuntime=require("react/jsx-runtime"),theme_context=require("../../theme/theme.context.cjs"),usePropId=require("../../utils/usePropId.cjs"),React=require("react"),index$d=require("../../node_modules/date-fns/esm/locale/en-GB/index.cjs"),AngleLeft=require("../../icons/AngleLeft.cjs"),AngleRight=require("../../icons/AngleRight.cjs"),useWeek_hook=require("./use-week.hook.cjs"),useMonths_hook=require("./use-months.hook.cjs"),useYears_hook=require("./use-years.hook.cjs"),index=require("../../node_modules/date-fns/esm/isValid/index.cjs"),index$1=require("../../node_modules/date-fns/esm/isBefore/index.cjs"),index$2=require("../../node_modules/date-fns/esm/startOfMonth/index.cjs"),index$3=require("../../node_modules/date-fns/esm/subYears/index.cjs"),index$4=require("../../node_modules/date-fns/esm/subMonths/index.cjs"),index$5=require("../../node_modules/date-fns/esm/format/index.cjs"),index$6=require("../../node_modules/date-fns/esm/isAfter/index.cjs"),index$7=require("../../node_modules/date-fns/esm/endOfMonth/index.cjs"),index$8=require("../../node_modules/date-fns/esm/addYears/index.cjs"),index$9=require("../../node_modules/date-fns/esm/addMonths/index.cjs"),index$a=require("../../node_modules/date-fns/esm/isToday/index.cjs"),index$b=require("../../node_modules/date-fns/esm/isSameDay/index.cjs"),index$c=require("../../node_modules/date-fns/esm/isSameMonth/index.cjs"),motion=require("../../node_modules/framer-motion/dist/es/render/dom/motion.cjs");const defaultProps={bordered:!0,borderStyle:"solid",dayFormat:"EEEEE",disabledWeekends:!0,horizontalBorders:!0,radius:"md",shadow:"sm",size:"md",verticalBorders:!0},Calendar=React.forwardRef(((e,s)=>{const a=theme_context.useComponentTheme("Calendar"),[n,d]=React.useState("calendar"),i=Object.assign(Object.assign({},defaultProps),e),{bordered:t,borderStyle:r,children:o,className:l="",value:c,dayFormat:u,blueDates:m=[],redDates:x=[],greenDates:j=[],yellowDates:h=[],purpleDates:b=[],disabledDates:y=[],disabledWeekends:R,horizontalBorders:g,locale:$=index$d,maxDate:v,minDate:f,radius:D,shadow:k,size:p,verticalBorders:q,onChange:w}=i,_=tslib.__rest(i,["bordered","borderStyle","children","className","value","dayFormat","blueDates","redDates","greenDates","yellowDates","purpleDates","disabledDates","disabledWeekends","horizontalBorders","locale","maxDate","minDate","radius","shadow","size","verticalBorders","onChange"]),[N,O]=React.useState(c),[C,S]=React.useState(c||new Date),L=usePropId.usePropId(e.id);React.useEffect((()=>{if(c&&index(c))return O(c),void S(c);O(null)}),[c]),React.useEffect((()=>{w&&w(N)}),[N]);const{weekRows:z,weekdays:B}=useWeek_hook.useWeek({month:C,disabledWeekends:R,disabledDates:y,minDate:f,maxDate:v,blueDates:m,redDates:x,greenDates:j,yellowDates:h,purpleDates:b}),M=useMonths_hook.useMonths(C),A=useYears_hook.useYears(C),P=jsxRuntime.jsxs("div",Object.assign({className:a.nav()},{children:[jsxRuntime.jsx("button",Object.assign({"aria-label":"year"===n?"Previous 12 years":"Previous month",type:"button",className:a.navButton({radius:D,size:p,bordered:t,borderStyle:r,shadow:k}),disabled:f&&index$1(index$2(C),f),onClick:()=>{S("year"===n?index$3(C,12):index$4(C,1))}},{children:jsxRuntime.jsx(AngleLeft.AngleLeft,{})})),jsxRuntime.jsxs("div",Object.assign({className:a.navMonth()},{children:[jsxRuntime.jsx("button",Object.assign({type:"button","aria-label":"Select month",onClick:()=>d("month"===n?"calendar":"month")},{children:jsxRuntime.jsx("time",Object.assign({dateTime:index$5(C,"LLLL")},{children:index$5(C,"LLLL",{locale:$})}))})),jsxRuntime.jsx("button",Object.assign({type:"button","aria-label":"Select year",onClick:()=>d("year"===n?"calendar":"year")},{children:jsxRuntime.jsx("time",Object.assign({dateTime:index$5(C,"yyyy")},{children:index$5(C,"yyyy",{locale:$})}))}))]})),jsxRuntime.jsx("button",Object.assign({"aria-label":"year"===n?"Next 12 years":"Next month",type:"button",className:a.navButton({radius:D,size:p,bordered:t,borderStyle:r,shadow:k}),disabled:v&&index$6(index$7(C),v),onClick:()=>{S("year"===n?index$8(C,12):index$9(C,1))}},{children:jsxRuntime.jsx(AngleRight.AngleRight,{})}))]})),E=jsxRuntime.jsx("div",Object.assign({className:a.head()},{children:B.map(((e,s)=>jsxRuntime.jsx("div",Object.assign({className:a.weekDay()},{children:index$5(e,u,{locale:$})}),`weekday-${s}`)))})),W=jsxRuntime.jsx(jsxRuntime.Fragment,{children:M.map(((e,s)=>jsxRuntime.jsx("div",Object.assign({className:a.calendarRow({borderStyle:r,verticalBorders:q})},{children:e.map(((e,s)=>jsxRuntime.jsx("button",Object.assign({onClick:()=>{S(e),d("year")},className:a.calendarCell({color:"white",size:p})},{children:index$5(e,"LLLL",{locale:$})}),`month-${s}`)))}),`month-row-${s}`)))}),F=jsxRuntime.jsx(jsxRuntime.Fragment,{children:A.map(((e,s)=>jsxRuntime.jsx("div",Object.assign({className:a.calendarRow({borderStyle:r,verticalBorders:q})},{children:e.map(((e,s)=>jsxRuntime.jsx("button",Object.assign({onClick:()=>{S(e),d("calendar")},className:a.calendarCell({color:"white",size:p})},{children:index$5(e,"yyyy",{locale:$})}),`year-${s}`)))}),`year-row-${s}`)))}),T=jsxRuntime.jsx(jsxRuntime.Fragment,{children:z.map(((e,s)=>jsxRuntime.jsx("div",Object.assign({className:a.calendarRow({borderStyle:r,verticalBorders:q})},{children:e.map(((e,s)=>jsxRuntime.jsxs("button",Object.assign({onClick:()=>{e.disabled||(O(e.value),S(index$2(e.value)))},disabled:e.disabled,className:a.calendarCell({isToday:index$a(e.value),isSameDay:N&&index(N)&&index$b(e.value,N),isSameMonth:index$c(e.value,C),color:e.color,size:p})},{children:[N&&index(N)&&index$b(e.value,N)&&jsxRuntime.jsx(motion.motion.div,{layoutId:`${L}-day-thumb`,className:a.thumb({size:p}),transition:{duration:.25,type:"spring"}}),jsxRuntime.jsxs("time",Object.assign({className:a.dayLabel(),dateTime:index$5(e.value,"MM/dd/yyyy")},{children:[" ",e.value.getDate()]}))]}),`day-${e.value.getDate()}-${s}`)))}),`week-${s}`)))});return jsxRuntime.jsxs("div",Object.assign({id:L,ref:s,className:a.base({className:l,size:p})},_,{children:[P,"calendar"===n&&E,jsxRuntime.jsxs("div",Object.assign({className:a.calendar({bordered:t,borderStyle:r,className:l,radius:D,shadow:k,horizontalBorders:g})},{children:["calendar"===n&&T,"month"===n&&W,"year"===n&&F]}))]}))}));Calendar.displayName="Calendar",module.exports=Calendar;
