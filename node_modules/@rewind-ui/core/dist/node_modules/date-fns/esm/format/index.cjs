"use strict";var index$4=require("../isValid/index.cjs"),index$6=require("../subMilliseconds/index.cjs"),index$3=require("../toDate/index.cjs"),index$8=require("../_lib/format/formatters/index.cjs"),index$7=require("../_lib/format/longFormatters/index.cjs"),index$5=require("../_lib/getTimezoneOffsetInMilliseconds/index.cjs"),index$9=require("../_lib/protectedTokens/index.cjs"),index$2=require("../_lib/toInteger/index.cjs"),index=require("../_lib/requiredArgs/index.cjs"),index$a=require("../_lib/defaultOptions/index.cjs"),index$1=require("../locale/en-US/index.cjs"),formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(e,n,i){var r,t,o,a,l,d,s,u,c,x,g,v,p,f,m,$,k,w;index(2,arguments);var E=String(n),h=index$a.getDefaultOptions(),R=null!==(r=null!==(t=null==i?void 0:i.locale)&&void 0!==t?t:h.locale)&&void 0!==r?r:index$1,b=index$2(null!==(o=null!==(a=null!==(l=null!==(d=null==i?void 0:i.firstWeekContainsDate)&&void 0!==d?d:null==i||null===(s=i.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:h.firstWeekContainsDate)&&void 0!==a?a:null===(c=h.locale)||void 0===c||null===(x=c.options)||void 0===x?void 0:x.firstWeekContainsDate)&&void 0!==o?o:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=index$2(null!==(g=null!==(v=null!==(p=null!==(f=null==i?void 0:i.weekStartsOn)&&void 0!==f?f:null==i||null===(m=i.locale)||void 0===m||null===($=m.options)||void 0===$?void 0:$.weekStartsOn)&&void 0!==p?p:h.weekStartsOn)&&void 0!==v?v:null===(k=h.locale)||void 0===k||null===(w=k.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==g?g:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!R.localize)throw new RangeError("locale must contain localize property");if(!R.formatLong)throw new RangeError("locale must contain formatLong property");var j=index$3(e);if(!index$4(j))throw new RangeError("Invalid time value");var q=index$5(j),D=index$6(j,q),O={firstWeekContainsDate:b,weekStartsOn:S,locale:R,_originalDate:j};return E.match(longFormattingTokensRegExp).map((function(e){var n=e[0];return"p"===n||"P"===n?(0,index$7[n])(e,R.formatLong):e})).join("").match(formattingTokensRegExp).map((function(r){if("''"===r)return"'";var t=r[0];if("'"===t)return cleanEscapedString(r);var o=index$8[t];if(o)return null!=i&&i.useAdditionalWeekYearTokens||!index$9.isProtectedWeekYearToken(r)||index$9.throwProtectedError(r,n,String(e)),null!=i&&i.useAdditionalDayOfYearTokens||!index$9.isProtectedDayOfYearToken(r)||index$9.throwProtectedError(r,n,String(e)),o(D,r,R.localize,O);if(t.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return r})).join("")}function cleanEscapedString(e){var n=e.match(escapedStringRegExp);return n?n[1].replace(doubleQuoteRegExp,"'"):e}module.exports=format;
