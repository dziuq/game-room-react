import*as React from"react";import{useId,useRef,useInsertionEffect}from"react";class PopChildMeasure extends React.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:e,isPresent:t}){const n=useId(),o=useRef(null),r=useRef({width:0,height:0,top:0,left:0});return useInsertionEffect((()=>{const{width:e,height:s,top:i,left:p}=r.current;if(t||!o.current||!e||!s)return;o.current.dataset.motionPopId=n;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${s}px !important;\n            top: ${i}px !important;\n            left: ${p}px !important;\n          }\n        `),()=>{document.head.removeChild(h)}}),[t]),React.createElement(PopChildMeasure,{isPresent:t,childRef:o,sizeRef:r},React.cloneElement(e,{ref:o}))}export{PopChild};
