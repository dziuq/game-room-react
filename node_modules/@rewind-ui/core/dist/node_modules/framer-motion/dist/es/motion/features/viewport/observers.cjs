"use strict";const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const r=observerCallbacks.get(e.target);r&&r(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...r}){const s=e||document;observers.has(s)||observers.set(s,{});const t=observers.get(s),o=JSON.stringify(r);return t[o]||(t[o]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...r})),t[o]}function observeIntersection(e,r,s){const t=initIntersectionObserver(r);return observerCallbacks.set(e,s),t.observe(e),()=>{observerCallbacks.delete(e),t.unobserve(e)}}exports.observeIntersection=observeIntersection;
