import{mix}from"./mix.js";import{invariant}from"./errors.js";import{hslaToRgba}from"./hsla-to-rgba.js";import{hex}from"../value/types/color/hex.js";import{rgba}from"../value/types/color/rgba.js";import{hsla}from"../value/types/color/hsla.js";const mixLinearColor=(r,o,a)=>{const e=r*r;return Math.sqrt(Math.max(0,a*(o*o-e)+e))},colorTypes=[hex,rgba,hsla],getColorType=r=>colorTypes.find((o=>o.test(r)));function asRGBA(r){const o=(a=r,colorTypes.find((r=>r.test(a))));var a;invariant(Boolean(o),`'${r}' is not an animatable color. Use the equivalent color code instead.`);let e=o.parse(r);return o===hsla&&(e=hslaToRgba(e)),e}const mixColor=(r,o)=>{const a=asRGBA(r),e=asRGBA(o),t={...a};return r=>(t.red=mixLinearColor(a.red,e.red,r),t.green=mixLinearColor(a.green,e.green,r),t.blue=mixLinearColor(a.blue,e.blue,r),t.alpha=mix(a.alpha,e.alpha,r),rgba.transform(t))};export{mixColor,mixLinearColor};
