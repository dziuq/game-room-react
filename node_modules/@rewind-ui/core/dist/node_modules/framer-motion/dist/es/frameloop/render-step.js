function createRenderStep(e){let t=[],n=[],c=0,s=!1,r=!1;const l=new WeakSet,d={schedule:(e,r=!1,d=!1)=>{const o=d&&s,h=o?t:n;return r&&l.add(e),-1===h.indexOf(e)&&(h.push(e),o&&s&&(c=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),l.delete(e)},process:o=>{if(s)r=!0;else{if(s=!0,[t,n]=[n,t],n.length=0,c=t.length,c)for(let n=0;n<c;n++){const c=t[n];c(o),l.has(c)&&(d.schedule(c),e())}s=!1,r&&(r=!1,d.process(o))}}};return d}export{createRenderStep};
