import{spring}from"./spring/index.js";import{calcGeneratorVelocity}from"./utils/velocity.js";function inertia({keyframes:e,velocity:t=0,power:o=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:r,min:s,max:l,restDelta:c=.5,restSpeed:v}){const d=e[0],u={done:!1,value:d},m=e=>void 0===s?l:void 0===l||Math.abs(s-e)<Math.abs(l-e)?s:l;let p=o*t;const f=d+p,y=void 0===r?f:r(f);y!==f&&(p=y-d);const g=e=>-p*Math.exp(-e/n),x=e=>y+g(e),b=e=>{const t=g(e),o=x(e);u.done=Math.abs(t)<=c,u.value=u.done?y:o};let h,D;const M=e=>{var t;(t=u.value,void 0!==s&&t<s||void 0!==l&&t>l)&&(h=e,D=spring({keyframes:[u.value,m(u.value)],velocity:calcGeneratorVelocity(x,e,u.value),damping:a,stiffness:i,restDelta:c,restSpeed:v}))};return M(0),{calculatedDuration:null,next:e=>{let t=!1;return D||void 0!==h||(t=!0,b(e),M(e)),void 0!==h&&e>h?D.next(e-h):(!t&&b(e),u)}}}export{inertia};
