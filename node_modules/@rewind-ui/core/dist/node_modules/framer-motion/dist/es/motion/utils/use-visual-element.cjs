"use strict";var React=require("react"),PresenceContext=require("../../context/PresenceContext.cjs"),index=require("../../context/MotionContext/index.cjs"),useIsomorphicEffect=require("../../utils/use-isomorphic-effect.cjs"),LazyContext=require("../../context/LazyContext.cjs"),MotionConfigContext=require("../../context/MotionConfigContext.cjs");function useVisualElement(e,t,n,o){const{visualElement:i}=React.useContext(index.MotionContext),a=React.useContext(LazyContext.LazyContext),r=React.useContext(PresenceContext.PresenceContext),c=React.useContext(MotionConfigContext.MotionConfigContext).reducedMotion,s=React.useRef();o=o||a.renderer,!s.current&&o&&(s.current=o(e,{visualState:t,parent:i,props:n,presenceContext:r,blockInitialAnimation:!!r&&!1===r.initial,reducedMotionConfig:c}));const u=s.current;React.useInsertionEffect((()=>{u&&u.update(n,r)}));const x=React.useRef(Boolean(window.HandoffAppearAnimations));return useIsomorphicEffect.useIsomorphicLayoutEffect((()=>{u&&(u.render(),x.current&&u.animationState&&u.animationState.animateChanges())})),React.useEffect((()=>{u&&(u.updateFeatures(),!x.current&&u.animationState&&u.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,x.current=!1)})),u}exports.useVisualElement=useVisualElement;
