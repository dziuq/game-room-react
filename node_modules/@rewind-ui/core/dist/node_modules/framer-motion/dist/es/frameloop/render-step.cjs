"use strict";function createRenderStep(e){let t=[],n=[],s=0,c=!1,r=!1;const l=new WeakSet,d={schedule:(e,r=!1,d=!1)=>{const o=d&&c,p=o?t:n;return r&&l.add(e),-1===p.indexOf(e)&&(p.push(e),o&&c&&(s=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),l.delete(e)},process:o=>{if(c)r=!0;else{if(c=!0,[t,n]=[n,t],n.length=0,s=t.length,s)for(let n=0;n<s;n++){const s=t[n];s(o),l.has(s)&&(d.schedule(s),e())}c=!1,r&&(r=!1,d.process(o))}}};return d}exports.createRenderStep=createRenderStep;
