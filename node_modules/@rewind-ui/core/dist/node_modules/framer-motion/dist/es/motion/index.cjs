"use strict";var React=require("react"),MotionConfigContext=require("../context/MotionConfigContext.cjs"),index=require("../context/MotionContext/index.cjs"),useVisualElement=require("./utils/use-visual-element.cjs"),useMotionRef=require("./utils/use-motion-ref.cjs"),create=require("../context/MotionContext/create.cjs"),loadFeatures=require("./features/load-features.cjs"),isBrowser=require("../utils/is-browser.cjs"),LayoutGroupContext=require("../context/LayoutGroupContext.cjs"),LazyContext=require("../context/LazyContext.cjs"),SwitchLayoutGroupContext=require("../context/SwitchLayoutGroupContext.cjs"),symbol=require("./utils/symbol.cjs");function _interopNamespaceDefault(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var React__namespace=_interopNamespaceDefault(React);function createMotionComponent({preloadedFeatures:e,createVisualElement:t,useRender:o,useVisualState:n,Component:r}){e&&loadFeatures.loadFeatures(e);const u=React.forwardRef((function(u,a){let i;const s={...React.useContext(MotionConfigContext.MotionConfigContext),...u,layoutId:useLayoutId(u)},{isStatic:c}=s,l=create.useCreateMotionContext(u),x=n(u,c);if(!c&&isBrowser.isBrowser){l.visualElement=useVisualElement.useVisualElement(r,x,s,t);const o=React.useContext(SwitchLayoutGroupContext.SwitchLayoutGroupContext),n=React.useContext(LazyContext.LazyContext).strict;l.visualElement&&(i=l.visualElement.loadFeatures(s,n,e,o))}return React__namespace.createElement(index.MotionContext.Provider,{value:l},i&&l.visualElement?React__namespace.createElement(i,{visualElement:l.visualElement,...s}):null,o(r,u,useMotionRef.useMotionRef(x,l.visualElement,a),x,c,l.visualElement))}));return u[symbol.motionComponentSymbol]=r,u}function useLayoutId({layoutId:e}){const t=React.useContext(LayoutGroupContext.LayoutGroupContext).id;return t&&void 0!==e?t+"-"+e:e}exports.createMotionComponent=createMotionComponent;
