"use strict";var mix=require("../../utils/mix.cjs"),hasTransform=require("../utils/has-transform.cjs");function scalePoint(t,a,s){return s+a*(t-s)}function applyPointDelta(t,a,s,e,o){return void 0!==o&&(t=scalePoint(t,o,e)),scalePoint(t,s,e)+a}function applyAxisDelta(t,a=0,s=1,e,o){t.min=applyPointDelta(t.min,a,s,e,o),t.max=applyPointDelta(t.max,a,s,e,o)}function applyBoxDelta(t,{x:a,y:s}){applyAxisDelta(t.x,a.translate,a.scale,a.originPoint),applyAxisDelta(t.y,s.translate,s.scale,s.originPoint)}function applyTreeDeltas(t,a,s,e=!1){const o=s.length;if(!o)return;let l,n;a.x=a.y=1;for(let r=0;r<o;r++){l=s[r],n=l.projectionDelta;const o=l.instance;o&&o.style&&"contents"===o.style.display||(e&&l.options.layoutScroll&&l.scroll&&l!==l.root&&transformBox(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),n&&(a.x*=n.x.scale,a.y*=n.y.scale,applyBoxDelta(t,n)),e&&hasTransform.hasTransform(l.latestValues)&&transformBox(t,l.latestValues))}a.x=snapToDefault(a.x),a.y=snapToDefault(a.y)}function snapToDefault(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function translateAxis(t,a){t.min=t.min+a,t.max=t.max+a}function transformAxis(t,a,[s,e,o]){const l=void 0!==a[o]?a[o]:.5,n=mix.mix(t.min,t.max,l);applyAxisDelta(t,a[s],a[e],n,a.scale)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function transformBox(t,a){transformAxis(t.x,a,xKeys),transformAxis(t.y,a,yKeys)}exports.applyAxisDelta=applyAxisDelta,exports.applyBoxDelta=applyBoxDelta,exports.applyPointDelta=applyPointDelta,exports.applyTreeDeltas=applyTreeDeltas,exports.scalePoint=scalePoint,exports.transformAxis=transformAxis,exports.transformBox=transformBox,exports.translateAxis=translateAxis;
